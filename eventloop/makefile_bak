CFLAGS = -lev -std=c++11 -pthread

objects =  main.o event_loop.o threads.o util.o socket.o inet_address.o \
					 acceptor.o logging.o udpkeeper.o

main : $(objects)
	g++ -o $@ $^ $(CFLAGS)

main.o : main.cpp event_loop.h
	g++ -c $< $(CFLAGS)

event_loop.o : event_loop.cpp event_loop.h util.h util.cpp
	g++ -c $< $(CFLAGS)

threads.o : threads.cpp threads.h blocking_queue.h
	g++ -c $< $(CFLAGS)

util.o : util.cpp
	g++ -c $< $(CFLAGS)

inet_address.o : inet_address.cpp
	g++ -c $< $(CFLAGS)

socket.o : socket.cpp inet_address.h
	g++ -c $< $(CFLAGS)

acceptor.o : acceptor.cpp socket.h inet_address.h event_loop.h
	g++ -c $< $(CFLAGS)

logging.o : logging.cpp util.h
	g++ -c $< $(CFLAGS)

udpkeeper.o : udpkeeper.cpp socket.h inet_address.h event_loop.h
	g++ -c $< $(CFLAGS)

.PHONY : clean
clean:
	rm main $(objects)
